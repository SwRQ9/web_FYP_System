<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Registration - FYP Management System</title>
    <link rel="stylesheet" href="..\css\registration.css">
    <!-- Removed the external JS reference since we're embedding the JS below -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="logo">
            <h1>FYP Management System</h1>
        </div>
        <nav>
            <a href="home_page.html">Home</a>
            <a href="login.html">Login</a>
        </nav>
    </header>

    <!-- Registration Form Section -->
    <section class="registration-form">
        <h2>Student Registration</h2>
        <form id="registrationForm" action="../php/register.php" method="POST" novalidate>
            <div class="form-group">
                <label for="name">Full Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="studentId">Student ID:</label>
                <input type="text" id="studentId" name="studentId" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required>
            </div>
            <div class="form-group">
                <label for="confirm-password">Confirm Password:</label>
                <input type="password" id="confirm-password" name="confirmPassword" required>
            </div>
            <div class="form-group">
                <label for="security_question">Security Question:</label>
                <select id="security_question" name="security_question" required>
                    <option value="">-- Select a Security Question --</option>
                    <option value="What city were you born in?">What city were you born in?</option>
                    <option value="What was your first pet's name?">What was your first pet's name?</option>
                    <option value="What was the name of your first school?">What was the name of your first school?</option>
                    <option value="What is your favorite book?">What is your favorite book?</option>
                </select>
            </div>
            <div class="form-group">
                <label for="security_answer">Security Answer:</label>
                <input type="text" id="security_answer" name="security_answer" required>
            </div>
            <button type="submit" class="submit-btn">Register</button>
        </form>
        <p>Already have an account? <a href="login.html">Login here</a>.</p>
    </section>

    <!-- Footer Section -->
    <footer>
        <p>&copy; 2024 FYP Management System. All rights reserved.</p>
    </footer>

    <!-- Embedded JavaScript for form validation -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('registrationForm');
            
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                clearErrors();
                
                const isValid = validateForm();
                if (isValid) {
                    form.submit();
                }
            });

            function validateForm() {
                let isValid = true;
                
                // Validate Full Name
                const name = document.getElementById('name').value.trim();
                if (!name) {
                    showError('name', 'Full name is required');
                    isValid = false;
                }

                // Validate Student ID
                const studentId = document.getElementById('studentId').value.trim();
                if (!studentId) {
                    showError('studentId', 'Student ID is required');
                    isValid = false;
                }

                // Validate Email
                const email = document.getElementById('email').value.trim();
                if (!validateEmail(email)) {
                    showError('email', 'Please enter a valid email address');
                    isValid = false;
                }

                // Validate Password
                const password = document.getElementById('password').value;
                if (!validatePassword(password)) {
                    showError('password', 'Password must be at least 8 characters with uppercase, lowercase, number, and special character');
                    isValid = false;
                }

                // Validate Confirm Password
                const confirmPassword = document.getElementById('confirm-password').value;
                if (password !== confirmPassword) {
                    showError('confirm-password', 'Passwords do not match');
                    isValid = false;
                }

                // Validate Security Question
                const securityQuestion = document.getElementById('security_question').value;
                if (!securityQuestion) {
                    showError('security_question', 'Please select a security question');
                    isValid = false;
                }

                // Validate Security Answer
                const securityAnswer = document.getElementById('security_answer').value.trim();
                if (!securityAnswer) {
                    showError('security_answer', 'Security answer is required');
                    isValid = false;
                }

                return isValid;
            }

            function validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }

            function validatePassword(password) {
                const re = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
                return re.test(password);
            }

            function showError(fieldId, message) {
                const field = document.getElementById(fieldId);
                const formGroup = field.closest('.form-group');
                const errorElement = document.createElement('small');
                errorElement.className = 'error-message';
                errorElement.textContent = message;
                
                field.classList.add('error');
                formGroup.appendChild(errorElement);
            }

            function clearErrors() {
                document.querySelectorAll('.error').forEach(field => {
                    field.classList.remove('error');
                });
                
                document.querySelectorAll('.error-message').forEach(error => {
                    error.remove();
                });
            }
        });
    </script>
</body>
</html>
